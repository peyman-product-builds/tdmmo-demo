"use strict";(self.webpackChunktdmmo=self.webpackChunktdmmo||[]).push([[197],{197:(F,m,i)=>{i.r(m),i.d(m,{ProfessionalMapsModule:()=>Q});var r=i(9808),p=i(2340),t=i(5e3),g=i(4850),h=i(520);let f=(()=>{class a{constructor(e){this.http=e,this.rootUrl=`${p.N.apiUrl}/api/data/maps-image-path`}getDomains(){return this.http.get(this.rootUrl)}getTimeList(){return this.http.get(this.rootUrl,{params:{domain:"D01"}}).pipe((0,g.U)(e=>e.reverse()))}getParameters(e){const{date:n,domain:s}=e;return this.http.get(this.rootUrl,{params:{date:n,domain:s}})}getImagesPath(e){const{date:n,domain:s,parameter:l}=e;return this.http.get(this.rootUrl,{params:{date:n,domain:s,parameter:l}}).pipe((0,g.U)(N=>N.map(D=>D.split(".")[0]).sort()))}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(h.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var u=i(6405),v=i(7714),C=i(336),d=i(7322),c=i(4107),M=i(508);function P(a,o){if(1&a&&(t.TgZ(0,"div",9),t._UZ(1,"img",10),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("src",e.imageUrl,t.LSH)}}function T(a,o){1&a&&t._UZ(0,"app-chart-placeholder",11)}function Z(a,o){if(1&a&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function U(a,o){if(1&a&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&a){const e=o.$implicit,n=t.oxw();t.Q6J("value",e),t.xp6(1),t.hij(" ",n.makeDate(e)," ")}}function _(a,o){if(1&a&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function J(a,o){if(1&a&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}let L=(()=>{class a{constructor(e,n){this.proMaps=e,this.spinner=n,this.data={domain:null,date:null,parameter:null,image_data:null},this.imageUrl="",this.timeList=[],this.domainList=[],this.parameterList=[],this.imageList=[]}ngOnInit(){this.getInitialData(),this.spinner.hide()}domainChange(e){this.data.domain=e.value,this.data.date&&this.getParams()}dateChange(e){this.data.date=e.value,this.getParams()}parameterChange(e){this.data.parameter=e.value,this.data.image_data=null,this.imageUrl="",this.proMaps.getImagesPath(this.data).subscribe(n=>{this.imageList=n})}imageChange(e){this.data.image_data=e.value;let n=`${p.N.apiUrl}/api/data/maps-image?`;for(const[s,l]of Object.entries(this.data))n+=`${s}=${l}&`;this.imageUrl=n}getParams(){this.data.parameter=null,this.data.image_data=null,this.imageUrl="",this.proMaps.getParameters(this.data).subscribe(e=>this.parameterList=e)}getInitialData(){this.proMaps.getDomains().subscribe(e=>this.domainList=e),this.proMaps.getTimeList().subscribe(e=>this.timeList=e)}makeDate(e){const n=+e.slice(8);let s=new Date(`${e.slice(0,4)}-${e.slice(4,6)}-${e.slice(6,8)}`);return s.setTime(s.getTime()+60*n*60*1e3),s.toUTCString()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(f),t.Y36(u.t2))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-professional-maps"]],decls:26,vars:13,consts:[[1,"container"],[1,"left-side"],["class","satellite",4,"ngIf"],["content","Complete The form to display Maps",4,"ngIf"],[1,"right-side"],["appearance","fill"],[3,"value","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"disabled","value","selectionChange"],[1,"satellite"],[1,"satellite__image",3,"src"],["content","Complete The form to display Maps"],[3,"value"]],template:function(e,n){1&e&&(t._UZ(0,"app-navigation"),t.TgZ(1,"div",0)(2,"div",1),t.YNc(3,P,2,1,"div",2),t.YNc(4,T,1,0,"app-chart-placeholder",3),t.qZA(),t.TgZ(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),t._uU(8,"Domain"),t.qZA(),t.TgZ(9,"mat-select",6),t.NdJ("selectionChange",function(l){return n.domainChange(l)}),t.YNc(10,Z,2,2,"mat-option",7),t.qZA()(),t.TgZ(11,"mat-form-field",5)(12,"mat-label"),t._uU(13,"Date and Cycle"),t.qZA(),t.TgZ(14,"mat-select",8),t.NdJ("selectionChange",function(l){return n.dateChange(l)}),t.YNc(15,U,2,2,"mat-option",7),t.qZA()(),t.TgZ(16,"mat-form-field",5)(17,"mat-label"),t._uU(18,"Parameter"),t.qZA(),t.TgZ(19,"mat-select",8),t.NdJ("selectionChange",function(l){return n.parameterChange(l)}),t.YNc(20,_,2,2,"mat-option",7),t.qZA()(),t.TgZ(21,"mat-form-field",5)(22,"mat-label"),t._uU(23,"Forecast Hour"),t.qZA(),t.TgZ(24,"mat-select",8),t.NdJ("selectionChange",function(l){return n.imageChange(l)}),t.YNc(25,J,2,2,"mat-option",7),t.qZA()()()()),2&e&&(t.xp6(3),t.Q6J("ngIf",n.imageUrl),t.xp6(1),t.Q6J("ngIf",!n.imageUrl),t.xp6(5),t.Q6J("value",n.data.domain),t.xp6(1),t.Q6J("ngForOf",n.domainList),t.xp6(4),t.Q6J("disabled",!n.data.domain)("value",n.data.date),t.xp6(1),t.Q6J("ngForOf",n.timeList),t.xp6(4),t.Q6J("disabled",!n.data.date||!n.parameterList.length)("value",n.data.parameter),t.xp6(1),t.Q6J("ngForOf",n.parameterList),t.xp6(4),t.Q6J("disabled",!n.data.parameter||!n.imageList.length)("value",n.data.image_data),t.xp6(1),t.Q6J("ngForOf",n.imageList))},directives:[v.J,r.O5,C.b,d.KE,d.hX,c.gD,r.sg,M.ey],styles:[".container[_ngcontent-%COMP%]{display:flex;min-height:100vh}.container[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{background-color:#0aa19f;flex:2;text-align:center;font-size:1.5rem;padding-top:6rem}.container[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{display:block;width:65%;margin:auto}.container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]{background-color:#f7f7f7;flex:5;display:flex;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .satellite__image[_ngcontent-%COMP%]{height:85vh;box-shadow:0 1rem 2rem #0009}"]}),a})();var O=i(5675),y=i(4466),A=i(1637);let Q=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[r.ez,O.Bz.forChild([{path:"",component:L}]),c.LD,y.m,A.X]]}),a})()}}]);